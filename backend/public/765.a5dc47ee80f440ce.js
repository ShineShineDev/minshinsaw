"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[765],{3765:(Bt,x,l)=>{l.r(x),l.d(x,{OrderRoutingModule:()=>zt});var p=l(2237),Z=l(9315),t=l(6689);let g=(()=>{class n{constructor(){this.itemObjs=new Array,this.setItems=e=>this.itemObjs=e,this.getItems=()=>this.itemObjs,this.setTotalAmount=e=>this.total_amount=e,this.getTotalAmount=()=>this.total_amount,this.setTableNumber=e=>this.table_number=e,this.getTableNumber=()=>this.table_number,this.setPaymentMethodObj=e=>this.paymentMethodObj=e,this.getPaymentMethodObj=e=>this.paymentMethodObj,this.setPaidAmount=e=>this.paidAmount=e,this.getPaidAmount=()=>this.paidAmount,this.setOfferPrice=e=>this.offerPrice=e,this.getOfferPrice=()=>this.offerPrice,this.setOfferType=e=>this.offerType=e,this.getOfferType=()=>this.offerPrice,this.setEmployeeObj=e=>this.employeeObj=e,this.getEmployeeObj=e=>this.employeeObj,this.setCustomerObj=e=>this.customerObj=e,this.getCustomerObj=()=>this.customerObj}getOrderObjet(){return{itemObjs:this.itemObjs,total_amount:this.total_amount,table_number:this.table_number,payment_method_obj:this.paymentMethodObj??null,paid_amount:this.paidAmount??null,offer_type:this.offerType??null,offer_price:this.offerPrice??null,customer_obj:this.customerObj??null,employee_Obj:this.employeeObj??null}}static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C=l(8103),h=l(4516),v=l(6661),A=l(9646),m=l(6814);let O=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-pan-loading"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(r,o){1&r&&t._UZ(0,"span",0)},styles:[".loader[_ngcontent-%COMP%]{width:32px;height:72px;display:inline-block;left:5px;position:relative;border:2px solid rgb(245,238,238);box-sizing:border-box;animation:_ngcontent-%COMP%_animloader 1s linear infinite alternate;color:#f68c6b;border-radius:0 0 4px 4px;transform:perspective(140px) rotateX(-45deg)}@keyframes _ngcontent-%COMP%_animloader{0%{box-shadow:0 0 inset}to{box-shadow:0 -70px inset}}"]})}return n})();function q(n,i){1&n&&(t.TgZ(0,"div",14),t._UZ(1,"app-pan-loading"),t.qZA())}function U(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," Parcel"),t.qZA())}const I=function(n){return{"col-4 col-md-2 btn btn-sm mx-1 mt-1 border":!0,"bg-secondary animate__animated animate__bounceIn ":n}};function k(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.addTalbe(a))}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.YNc(3,U,2,0,"span",24),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("disabled",0==e.status)("ngClass",t.VKq(6,I,e.number==r.table_number)),t.xp6(1),t.Udp("text-decoration",0==e.status?"line-through":"none"),t.xp6(1),t.hij(" ",e.number," "),t.xp6(1),t.Q6J("ngIf",0==e.number)}}const j=function(n){return{"px-3 btn btn-sm mx-1 mt-1 border":!0,"bg-secondary animate__animated animate__bounceIn ":n}};function w(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selectEmployee(a))}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("ngClass",t.VKq(2,j,e.id==r.selectedEmployeeObj.id)),t.xp6(1),t.hij(" ",e.name," ")}}function M(n,i){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"h5",18),t._uU(4,"Chose Table"),t.qZA(),t.TgZ(5,"div",19),t.YNc(6,k,4,8,"button",20),t.qZA()()(),t.TgZ(7,"div",16)(8,"div",17)(9,"h5",18),t._uU(10,"Assing to Employe"),t.qZA(),t.TgZ(11,"div",21),t.YNc(12,w,2,4,"button",22),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.tables.data),t.xp6(6),t.Q6J("ngForOf",e.employees.data)}}const P=function(n){return{"col-6 col-md-4 btn btn-sm mx-1 mt-1 border ":!0,"bg-secondary animate__animated animate__bounceIn ":n}};function S(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selectCustomer(a))}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("ngClass",t.VKq(2,P,e.id==r.selectedCustomerObj.id)),t.xp6(1),t.hij(" ",e.name," ")}}function N(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"h5",18),t._uU(4,"Customer"),t.qZA(),t.TgZ(5,"div",19),t.YNc(6,S,2,4,"button",22),t.qZA()()(),t.TgZ(7,"div",29)(8,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.nextStep())}),t._uU(9,"Go to summery "),t._UZ(10,"i",31),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.customers.data.data)}}let J=(()=>{class n{constructor(e,r,o,a,s,c){this.router=e,this.orderState=r,this.tableService=o,this.paymentMethodServices=a,this.employeeServices=s,this.customerServices=c,this.isLoading=!0,this.clickSound=new Audio("assets/sound/livechat.mp3"),this.addTalbe=d=>{this.playClickSound(),this.table_number=d.number,this.orderState.setTableNumber(d.number)},this.selectedEmployeeObj={},this.selectEmployee=d=>{this.playClickSound(),this.selectedEmployeeObj=d,this.orderState.setEmployeeObj(d)},this.selectedCustomerObj={},this.selectCustomer=d=>{this.playClickSound(),this.selectedCustomerObj=d,this.orderState.setCustomerObj(d)},this.nextStep=()=>{null!=this.table_number?this.router.navigate(["/order/order-summary"]):alert("Chose Talbe")},this.playClickSound=()=>{this.clickSound.play()}}ngOnInit(){this.loadData()}loadData(){(0,Z.D)([this.tableService.getAll(),this.paymentMethodServices.getAll(),this.employeeServices.getAll(),this.customerServices.getAll()]).subscribe(([e,r,o,a])=>{this.tables=e,this.paymentMethods=r,this.employees=o,this.customers=a,this.isLoading=!1},e=>{console.log(e),this.isLoading=!1})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(p.F0),t.Y36(g),t.Y36(C.w),t.Y36(h.Y),t.Y36(v.o),t.Y36(A.U))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chose-necessary-data"]],decls:26,vars:3,consts:[[1,"px-md-4","px-3",2,"padding","relative"],[1,"mt-3"],[1,"card","px-3","pb-5","mt-2"],[1,"d-flex","justify-content-around","align-items-center","bg-light","p-1","rounded","mt-3"],[1,"d-flex"],[1,"step","active"],[1,"ml-2"],[1,"bi","bi-arrow-right-circle-fill","text-success"],[1,"step","active","animate__bounceIn"],["routerLink","/order/order-summary"],[1,"step"],["class","d-flex justify-content-around align-items-center p-1 rounded mt-5",4,"ngIf"],["class","card-deck mt-4",4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","justify-content-around","align-items-center","p-1","rounded","mt-5"],[1,"card-deck","mt-4"],[1,"card","border","shadow-none"],[1,"px-2","pb-3","rounded"],[1,"text-center","mt-3"],[1,"row","mx-1","g-2"],[3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap","mx-1","g-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"disabled","ngClass","click"],[4,"ngIf"],[3,"ngClass","click"],[1,"row"],[1,"col-md-6","mt-2"],[1,"border","rounded","pb-4"],[1,"col-md-6","mt-3"],[1,"btn","btn-sm","bg-dark","float-right",3,"click"],[1,"bi","bi-arrow-right-circle-fill","ml-1"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Order / New"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7,"1"),t.qZA(),t.TgZ(8,"span",6),t._uU(9,"Pick Up Item"),t.qZA()(),t._UZ(10,"i",7),t.TgZ(11,"div",4)(12,"span",8),t._uU(13,"2"),t.qZA(),t.TgZ(14,"span",6),t._uU(15,"Table & Payment"),t.qZA()(),t._UZ(16,"i",7),t.TgZ(17,"div",4)(18,"a",9)(19,"span",10),t._uU(20,"3"),t.qZA()(),t.TgZ(21,"span",6),t._uU(22,"Summary"),t.qZA()()(),t.YNc(23,q,2,0,"div",11),t.YNc(24,M,13,2,"div",12),t.YNc(25,N,11,1,"div",13),t.qZA()()),2&r&&(t.xp6(23),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading))},dependencies:[m.mk,m.sg,m.O5,p.rH,O],encapsulation:2})}return n})();var F=l(8815),f=l(2191),u=l(6223),Y=l(2986);function Q(n,i){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-http-error",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("httpErrorResponse",e.httpErrorResponse)}}function E(n,i){1&n&&(t.TgZ(0,"tr"),t._UZ(1,"td",26),t.qZA())}const D=function(){return[1,2,3,4,5]};function L(n,i){1&n&&(t.TgZ(0,"tbody"),t.YNc(1,E,2,0,"tr",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,D)))}function K(n,i){1&n&&t._UZ(0,"span",33)}const H=function(n,i){return{"badge border":!0,"bg-success":n,"bg-danger":i}};function G(n,i){if(1&n&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(2,H,"Completed"==e.status,"Cancel"==e.status)),t.xp6(1),t.hij(" ",e.status," ")}}function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"select",35),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw();return t.KtG(s.changeStatusEvent(o,a))}),t._UZ(1,"option"),t.TgZ(2,"option",36),t._uU(3),t.qZA(),t.TgZ(4,"option",36),t._uU(5),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.orderItemStatus.COMPLETED),t.xp6(2),t.Oqu(e.orderItemStatus.CANCEL)}}function V(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("dblclick",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.changeStatusToComplete(a))}),t.TgZ(1,"td",28),t.YNc(2,K,1,0,"span",29),t.YNc(3,G,2,5,"span",30),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28)(7,"span",31),t._uU(8),t.qZA()(),t.TgZ(9,"td",28),t._uU(10),t.qZA(),t.TgZ(11,"td",28),t._uU(12),t.qZA(),t.TgZ(13,"td",28),t.YNc(14,$,6,2,"select",32),t.qZA()()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(2),t.Q6J("ngIf","Preparing"==e.status),t.xp6(1),t.Q6J("ngIf","Preparing"!=e.status),t.xp6(2),t.Oqu(e.item.name),t.xp6(3),t.Oqu(e.quantity),t.xp6(2),t.hij("",e.price," MMK"),t.xp6(2),t.hij("",e.subtotal," MMK"),t.xp6(2),t.Q6J("ngIf",e.status!=r.orderItemStatus.COMPLETED)}}let z=(()=>{class n{constructor(e){this.orderService=e,this.fetchLoading=!0,this.orderItemStatus=F.M,this.generateSummery=()=>{this.totalOrder=this.orders.length,this.totalOrderItems=22,this.totalOrderAmount=this.orders.reduce((r,o)=>r+o.total_amount,0),this.totalOrderPaidAmount=this.orders.reduce((r,o)=>r+o.paid_amount,0),this.outstandingIncome=this.totalOrderAmount-this.totalOrderPaidAmount},this.showTodaySummeryView=()=>{this.generateSummery(),document.getElementById("show-summery-btn")?.classList.toggle("d-none"),document.getElementById("summery")?.classList.toggle("d-none")},this.changeStatusToComplete=r=>this.changeStatus("Completed",r),this.changeStatusEvent=(r,o)=>this.changeStatus(r.target.value,o)}ngOnInit(){this.getTodayOrder()}getTodayOrder(){this.orderService.getTodayOrders().subscribe(e=>{this.fetchLoading=!1,this.orders=e.data,this.ordersItems=this.orders.flatMap(r=>r.order_items),console.log(this.ordersItems)},e=>{this.fetchLoading=!1,console.log(e)})}changeStatus(e,r){this.orderService.changeOrderItemStatus(r.id,e).subscribe(o=>{console.log(o),this.getTodayOrder()},o=>{console.log(o)})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(f.p))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-order-item-view"]],decls:64,vars:8,consts:[[1,"px-md-4","px-3"],[1,"mt-3","mb-4"],[1,"badge","bg-warning"],[4,"ngIf"],["id","show-summery-btn",1,"btn","btn-sm","border",3,"click"],[1,"bi","bi-speedometer2","ml-1"],["routerLink","/order/index","id","show-summery-btn",1,"btn","btn-sm","border","ml-1"],[1,"bi","bi-cart-check-fill","ml-1"],["routerLink","/order/new",1,"btn","btn-sm","ml-md-1","float-md-right","border","mt-md-1"],[1,"bi","bi-plus-circle-fill"],["id","show-summery-btn",1,"btn","btn-sm","pl-0","ml-1","float-md-right"],["type","date",1,"form-control","form-control-sm"],["id","summery",1,"bg-light","mt-4","p-2","rounded","d-none"],[1,"border-bottom","pb-2"],[1,"float-right","py-0","btn","btn-sm","text-danger",3,"click"],[1,"bi","bi-x-circle-fill"],[1,"py-0","px-3","m-0","mt-2"],[1,"float-right","px-2"],[1,"border","rounded","p-2","pb-4","mt-3"],[1,"table-responsive","mt-0"],[1,"table","table-striped","table-hover","rounded","mb-0","border-bottom"],[1,"text-white","rounded","px-2","bg-info"],[1,"p-1","font-size-14",2,"min-width","100px"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"httpErrorResponse"],[4,"ngFor","ngForOf"],["colspan","6",1,"bg-light","animated-background","pt-4"],[3,"dblclick"],[1,"py-1","font-size-14"],["class","loader",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"badge","border"],["style","border: 1px solid rgb(196, 189, 189);",3,"change",4,"ngIf"],[1,"loader"],[3,"ngClass"],[2,"border","1px solid rgb(196, 189, 189)",3,"change"],[1,"font-size-14"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div")(2,"div",1),t._uU(3," Order / Today "),t._UZ(4,"span",2),t.qZA(),t.YNc(5,Q,2,1,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return o.showTodaySummeryView()}),t._uU(7,"Report Today "),t._UZ(8,"i",5),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Order View "),t._UZ(11,"i",7),t.qZA(),t.TgZ(12,"a",8),t._UZ(13,"i",9),t._uU(14," Add New "),t.qZA(),t.TgZ(15,"div",10),t._UZ(16,"input",11),t.qZA()(),t.TgZ(17,"div",12)(18,"h6",13)(19,"span"),t._uU(20,"Tody Summery"),t.qZA(),t.TgZ(21,"button",14),t.NdJ("click",function(){return o.showTodaySummeryView()}),t._UZ(22,"i",15),t.qZA()(),t.TgZ(23,"div")(24,"p",16),t._uU(25,"Total Order"),t.TgZ(26,"span",17),t._uU(27),t.qZA()(),t.TgZ(28,"p",16),t._uU(29,"Total Order Items"),t.TgZ(30,"span",17),t._uU(31),t.qZA()(),t.TgZ(32,"p",16),t._uU(33,"Total Order Amount"),t.TgZ(34,"span",17),t._uU(35),t.qZA()(),t.TgZ(36,"p",16),t._uU(37,"Total Order Paid Amount"),t.TgZ(38,"span",17),t._uU(39),t.qZA()(),t.TgZ(40,"p",16),t._uU(41,"Outstanding Income"),t.TgZ(42,"span",17),t._uU(43),t.qZA()()()(),t.TgZ(44,"div",18)(45,"div",19)(46,"table",20)(47,"thead",21)(48,"tr")(49,"th",22),t._uU(50,"Status "),t.qZA(),t.TgZ(51,"th",22),t._uU(52,"Name"),t.qZA(),t.TgZ(53,"th",22),t._uU(54,"QTY "),t.qZA(),t.TgZ(55,"th",22),t._uU(56,"Price "),t.qZA(),t.TgZ(57,"th",22),t._uU(58,"Subtotal "),t.qZA(),t.TgZ(59,"th",22),t._uU(60,"Change Status "),t.qZA()()(),t.YNc(61,L,2,2,"tbody",3),t.TgZ(62,"tbody"),t.YNc(63,V,15,7,"tr",23),t.qZA()()()()()),2&r&&(t.xp6(5),t.Q6J("ngIf",null!=o.httpErrorResponse),t.xp6(22),t.Oqu(o.totalOrder),t.xp6(4),t.Oqu(o.totalOrderItems),t.xp6(4),t.Oqu(o.totalOrderAmount),t.xp6(4),t.Oqu(o.totalOrderPaidAmount),t.xp6(4),t.Oqu(o.outstandingIncome),t.xp6(18),t.Q6J("ngIf",o.fetchLoading),t.xp6(2),t.Q6J("ngForOf",o.ordersItems))},dependencies:[m.mk,m.sg,m.O5,p.rH,u.YN,u.Kr,Y.I],styles:['.font-size-13[_ngcontent-%COMP%]{font-size:13px}.font-size-14[_ngcontent-%COMP%]{font-size:14px}.loader[_ngcontent-%COMP%]{position:relative;width:30px;height:3px;border-radius:0 0 5px 5px;background-color:#3e494d;box-shadow:0 -1px 2px #5d6063 inset;animation:_ngcontent-%COMP%_panex .5s linear alternate infinite;transform-origin:40px 0;z-index:10;perspective:75px}.loader[_ngcontent-%COMP%]:before{content:"";position:absolute;left:calc(100% - 1px);top:0;z-index:-2;height:2px;width:17.5px;border-radius:0 1px 1px 0;background-repeat:no-repeat;background-image:linear-gradient(#6c4924,#4b2d21),linear-gradient(#4d5457 6px,transparent 0),linear-gradient(#9f9e9e 6px,transparent 0);background-size:12.5px 2.5px,1px 2px,6px 1px;background-position:right center,4px center,0px center}.loader[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;top:0;z-index:-2;transform:translate(-50%,-5px) rotate3d(75,-1,1.5,78deg);width:20.5px;height:8px;background:#fff;background-image:radial-gradient(circle .5px,#fff6 90%,transparent 10%),radial-gradient(circle 3px,#ffc400 90%,transparent 10%),radial-gradient(circle 3px,#ffae00 100%,transparent 0);background-repeat:no-repeat;background-position:-.5px -1px,-.25px -.25px,-.125px -.125px;box-shadow:-.25px -.5px #0002 inset,0 0 .5px #0003 inset;border-radius:47% 36% 50% 50%/49% 45% 42% 44%;animation:_ngcontent-%COMP%_eggRst 1s ease-out infinite}@keyframes _ngcontent-%COMP%_eggRst{0%,to{transform:translate(-50%,-5px) rotate3d(90,0,0,90deg);opacity:0}10%,90%{transform:translate(-50%,-7.5px) rotate3d(90,0,0,90deg);opacity:1}25%{transform:translate(-50%,-10px) rotate3d(85,8.5,1,70deg)}75%{transform:translate(-50%,-10px) rotate3d(75,-1.5,1,70deg)}50%{transform:translate(-55%,-12.5px) rotate3d(75,-4,1.5,50deg)}}@keyframes _ngcontent-%COMP%_panex{0%{transform:rotate(-1deg)}to{transform:rotate(2deg)}}']})}return n})();function B(n,i){if(1&n&&(t.TgZ(0,"tr",34)(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t.qZA(),t.TgZ(5,"td",17)(6,"span",35),t._uU(7),t.qZA()(),t.TgZ(8,"td",36),t._uU(9),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.price),t.xp6(3),t.Oqu(e.qty),t.xp6(2),t.Oqu(e.subtotal)}}function R(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.calculateDiscountPercentage()," % ")}}function X(n,i){if(1&n&&(t.TgZ(0,"tr",37)(1,"td",38),t._uU(2,"Offer"),t.qZA(),t._UZ(3,"td",21),t.TgZ(4,"td",39),t.YNc(5,R,2,1,"span",40),t._uU(6),t.qZA()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf","Discount"==e.offerType),t.xp6(1),t.hij(" ",e.offerType," ")}}function W(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",37)(1,"td",38),t._uU(2),t.qZA(),t._UZ(3,"td",21)(4,"td",21),t.TgZ(5,"td",21)(6,"input",41),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.paidAmount=o)})("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.setPaidAmount(o))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("Paid ",e.paidAmount,""),t.xp6(4),t.Q6J("ngModel",e.paidAmount)}}function tt(n,i){1&n&&(t.TgZ(0,"tr",37)(1,"td",38),t._uU(2,"Outstanding Income"),t.qZA(),t._UZ(3,"td",21)(4,"td",39),t.qZA())}function et(n,i){1&n&&(t.TgZ(0,"div",42),t._UZ(1,"span",43),t.qZA())}const nt=function(n){return{"btn btn-sm mr-1 border":!0,"bg-secondary animate__animated animate__bounceIn ":n}};function ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selectPayment(a))}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("disabled",0==e.status)("ngClass",t.VKq(3,nt,e.id==r.selectePaymentObj.id)),t.xp6(1),t.hij(" ",e.title," ")}}function rt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",57)(1,"span",52),t._uU(2,"Discount Price"),t.qZA(),t.TgZ(3,"div",52)(4,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.offerPrice=o)})("change",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setOfferPrice(o))}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.offerPrice)}}function it(n,i){if(1&n&&(t.TgZ(0,"div",59),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Transfer to number : ",e.selectePaymentObj.account_number,"")}}function st(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",44)(1,"h6",1),t._uU(2," Chose Payment "),t._UZ(3,"i",45),t.qZA(),t.TgZ(4,"div",46),t.YNc(5,ot,2,5,"button",47),t.TgZ(6,"button",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showOfferView())}),t._uU(7,"Offer "),t._UZ(8,"i",49),t.qZA()(),t.TgZ(9,"div",50)(10,"div",51)(11,"span",52),t._uU(12,"Type"),t.qZA(),t.TgZ(13,"div",52)(14,"select",53),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectOfferType(o))}),t._UZ(15,"option"),t.TgZ(16,"option"),t._uU(17,"FOC"),t.qZA(),t.TgZ(18,"option"),t._uU(19,"Discount"),t.qZA()()()(),t.YNc(20,rt,5,1,"div",54),t.qZA(),t.YNc(21,it,2,1,"div",55),t.qZA()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.paymentMethods.data),t.xp6(15),t.Q6J("ngIf","Discount"==e.offerType),t.xp6(1),t.Q6J("ngIf",null!=e.selectePaymentObj.account_number&&"FOC"!=e.offerType&&0!=e.selectePaymentObj.account_number)}}function at(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.fetchPaymentMethod())}),t._uU(1,"Pay Bill "),t._UZ(2,"i",61),t.qZA()}}function ct(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.payLater())}),t._uU(1,"Pay Later "),t._UZ(2,"i",61),t.qZA()}}function dt(n,i){1&n&&(t.TgZ(0,"div",62),t._UZ(1,"span",43),t.qZA())}function lt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.orderNow())}),t._uU(1,"Order Now"),t.qZA()}}const mt=function(){return{"col-md-7 mt-1":!0}};let ut=(()=>{class n{constructor(e,r,o,a,s){this.orderState=e,this.orderService=r,this.router=o,this.datePipe=a,this.paymentMethodServices=s,this.postLoading=!1,this.fetchLoading=!1,this.paidAmount=null,this.offerType=null,this.offerPrice=null,this.orderNow=()=>{"Discount"!=this.offerType||null!=this.offerPrice?(this.postLoading=!0,this.orderService.sendOrder(this.orderState.getOrderObjet()).subscribe(c=>{this.postLoading=!1,this.router.navigate(["order/index"])},c=>{console.log(c),this.postLoading=!1})):alert("Enter Discount Price")},this.selectePaymentObj={},this.selectPayment=c=>{this.selectePaymentObj=c,this.orderState.setPaymentMethodObj(c)},this.payLater=()=>{this.paymentMethods=null,this.orderState.setPaymentMethodObj(null)},this.showOfferView=()=>{document.getElementById("offer")?.classList.toggle("d-none")},this.selectOfferType=c=>{this.offerType=c.target.value,this.orderState.setOfferType(this.offerType)},this.setOfferPrice=c=>this.orderState.setOfferPrice(c.target.value),this.setPaidAmount=c=>this.orderState.setPaidAmount(c.target.value),this.calculateDiscountPercentage=()=>{const c=this.orderState.getTotalAmount();return null!==this.offerPrice?this.offerPrice/c*100:0}}ngOnInit(){this.orderObj=this.orderState.getOrderObjet(),console.log(this.orderObj),(null==this.orderObj.table_number||null==this.orderObj.table_number)&&this.router.navigate(["/order/new"])}fetchPaymentMethod(){this.fetchLoading=!0,this.paymentMethodServices.getAll().subscribe(e=>{console.log(e),this.paymentMethods=e,this.fetchLoading=!1},e=>{console.log(e),this.fetchLoading=!1})}getFormattedDateTime(){const e=new Date;return`${this.datePipe.transform(e,"dd-MM-yyyy")} ${this.datePipe.transform(e,"HH:mm:ss")}`}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(g),t.Y36(f.p),t.Y36(p.F0),t.Y36(m.uU),t.Y36(h.Y))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-order-summary"]],decls:78,vars:17,consts:[[1,"px-md-4","px-3"],[1,"mt-3"],[1,"card","px-3","pb-3","mt-2"],[1,"d-flex","justify-content-around","align-items-center","bg-light","p-1","rounded","mt-3"],[1,"d-flex"],[1,"step","active"],[1,"ml-2"],[1,"bi","bi-arrow-right-circle-fill","text-success"],[1,"step","active","animate__animated","animate__bounceIn"],[1,"row","mt-3"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"ngClass"],[1,"border","p-2","rounded"],[1,"table-responsive","mt-2","mb-0"],[1,"table","table-stripped","mb-0"],[1,"bg-info","rounded"],[1,"p-1"],["class","border-bottom ",4,"ngFor","ngForOf"],[1,"pt-1"],[1,""],[1,"p-1","border-0"],[1,"p-1","border-0",2,"text-align","right"],["class","border-0",4,"ngIf"],[1,"col-md-5","mt-1"],[1,"list-group","list-group-flush","border","rounded"],[1,"list-group-item","py-1","px-3","border-0"],[1,"float-right"],["class","d-flex justify-content-center mt-2",4,"ngIf"],["class","rounded border mt-2 px-3 pb-3",4,"ngIf"],[1,"mt-2","mb-2"],["class","btn btn-sm btn-outline-info my-2",3,"click",4,"ngIf"],["class","float-right mt-2",4,"ngIf"],["class","btn btn-sm bg-secondary float-right my-2",3,"click",4,"ngIf"],[1,"border-bottom"],[1,"px-2"],[1,"p-1",2,"text-align","right"],[1,"border-0"],[1,"p-1","m-0","border-0"],["colspan","2",1,"p-1","border-0",2,"text-align","right"],[4,"ngIf"],["placeholder","Enter Paid Amount",1,"form-control","form-control-sm","border-top-0","border-left-0","border-right-0","border-bottom","pr-1",2,"text-align","right",3,"ngModel","ngModelChange","change"],[1,"d-flex","justify-content-center","mt-2"],[1,"loader"],[1,"rounded","border","mt-2","px-3","pb-3"],[1,"bi","bi-wallet2","float-right"],[1,"flex","mx-1","g-2"],[3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","border","text-danger",3,"click"],[1,"ml-2","bi","bi-box2-heart-fill"],["id","offer",1,"mt-2","py-3","d-none"],[1,"row"],[1,"col-6"],[1,"form-control","form-control-sm",3,"change"],["class","row mt-2",4,"ngIf"],["class","my-2",4,"ngIf"],[3,"disabled","ngClass","click"],[1,"row","mt-2"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[1,"my-2"],[1,"btn","btn-sm","btn-outline-info","my-2",3,"click"],[1,"bi","bi-cash"],[1,"float-right","mt-2"],[1,"btn","btn-sm","bg-secondary","float-right","my-2",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Order / New"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7,"1"),t.qZA(),t.TgZ(8,"span",6),t._uU(9,"Pick Up Item"),t.qZA()(),t._UZ(10,"i",7),t.TgZ(11,"div",4)(12,"span",5),t._uU(13,"2"),t.qZA(),t.TgZ(14,"span",6),t._uU(15,"Table & Payment"),t.qZA()(),t._UZ(16,"i",7),t.TgZ(17,"div",4)(18,"span",8),t._uU(19,"3"),t.qZA(),t.TgZ(20,"span",6),t._uU(21,"Summary"),t.qZA()()(),t.TgZ(22,"div",9)(23,"div",10)(24,"h6",11),t._uU(25,"Order Summary"),t.qZA()(),t.TgZ(26,"div",12)(27,"div",13)(28,"div",14)(29,"table",15)(30,"thead",16)(31,"tr")(32,"th",17),t._uU(33,"Name"),t.qZA(),t.TgZ(34,"th",17),t._uU(35,"Price"),t.qZA(),t.TgZ(36,"th",17),t._uU(37,"QTY"),t.qZA(),t.TgZ(38,"th",17),t._uU(39,"Sub Total"),t.qZA()()(),t.TgZ(40,"tbody"),t.YNc(41,B,10,4,"tr",18),t._UZ(42,"div",19),t.TgZ(43,"tr",20)(44,"td",21),t._uU(45,"Grand Total "),t.qZA(),t._UZ(46,"td",21)(47,"td",21),t.TgZ(48,"td",22),t._uU(49),t.qZA()(),t.YNc(50,X,7,2,"tr",23),t.YNc(51,W,7,2,"tr",23),t.YNc(52,tt,5,0,"tr",23),t.qZA()()()()(),t.TgZ(53,"div",24)(54,"ul",25)(55,"li",26),t._uU(56," Date "),t.TgZ(57,"span",27),t._uU(58),t.qZA()(),t.TgZ(59,"li",26),t._uU(60," Table "),t.TgZ(61,"span",27),t._uU(62),t.qZA()(),t.TgZ(63,"li",26),t._uU(64," Assing to "),t.TgZ(65,"span",27),t._uU(66),t.qZA()(),t.TgZ(67,"li",26),t._uU(68," Customer "),t.TgZ(69,"span",27),t._uU(70),t.qZA()()(),t.YNc(71,et,2,0,"div",28),t.YNc(72,st,22,3,"div",29),t.TgZ(73,"div",30),t.YNc(74,at,3,0,"button",31),t.YNc(75,ct,3,0,"button",31),t.YNc(76,dt,2,0,"div",32),t.YNc(77,lt,2,0,"button",33),t.qZA()()()()()),2&r&&(t.xp6(26),t.Q6J("ngClass",t.DdM(16,mt)),t.xp6(15),t.Q6J("ngForOf",o.orderObj.itemObjs),t.xp6(8),t.hij(" ",o.orderObj.total_amount," "),t.xp6(1),t.Q6J("ngIf",null!=o.offerType&&null!=o.paymentMethods),t.xp6(1),t.Q6J("ngIf",null!=o.paymentMethods),t.xp6(1),t.Q6J("ngIf",null!=o.paymentMethods),t.xp6(6),t.Oqu(o.getFormattedDateTime()),t.xp6(4),t.Oqu(o.orderObj.table_number),t.xp6(4),t.Oqu(null==o.orderObj.employee_Obj?null:o.orderObj.employee_Obj.name),t.xp6(4),t.Oqu(null==o.orderObj.customer_obj?null:o.orderObj.customer_obj.name),t.xp6(1),t.Q6J("ngIf",o.fetchLoading),t.xp6(1),t.Q6J("ngIf",null!=o.paymentMethods),t.xp6(2),t.Q6J("ngIf",null==o.paymentMethods),t.xp6(1),t.Q6J("ngIf",null!=o.paymentMethods),t.xp6(1),t.Q6J("ngIf",o.postLoading),t.xp6(1),t.Q6J("ngIf",!o.postLoading))},dependencies:[m.mk,m.sg,m.O5,u.YN,u.Kr,u.Fj,u.wV,u.JJ,u.On],encapsulation:2})}return n})();var pt=l(972),_=function(n){return n.STOCK="Stock",n.MENUITEM="Menu-Item",n}(_||{});class T{constructor(i){Object.assign(this,i)}}var _t=l(5887),gt=l(136);function ht(n,i){1&n&&(t.TgZ(0,"div",12),t._UZ(1,"app-pan-loading"),t.qZA())}function ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.addItem(o))}),t._uU(1),t.TgZ(2,"span",36),t._uU(3),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.price," MMK")}}function bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.addItem(o))}),t._uU(1),t.TgZ(2,"span",36),t._uU(3),t.qZA(),t.TgZ(4,"span",38),t._uU(5),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Udp("text-decoration",0===e.quantity?"line-through":"none")("border-top","Stock"===e.item_type?"1px solid #dee2e6":"")("border-bottom","Stock"===e.item_type?"1px solid #dee2e6":"")("border-right","Stock"===e.item_type?"1px solid #dee2e6":"")("border-left","Stock"===e.item_type?"3px solid #DC4C64":""),t.Q6J("disabled",0==e.quantity),t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.price," MMK"),t.xp6(2),t.hij(" ",e.quantity," Qty")}}function xt(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ft,4,2,"button",33),t.YNc(2,bt,6,14,"ng-template",null,34,t.W1O),t.qZA()),2&n){const e=i.$implicit,r=t.MAs(3);t.xp6(1),t.Q6J("ngIf","Stock"!==e.item_type)("ngIfElse",r)}}function Zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",39)(1,"td",23),t._uU(2),t.qZA(),t.TgZ(3,"td",23),t._uU(4),t.qZA(),t.TgZ(5,"td",23)(6,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.qty("increase",a))}),t._uU(7," + "),t.qZA(),t.TgZ(8,"span",41),t._uU(9),t.qZA(),t.TgZ(10,"button",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.qty("decrease",a))}),t._uU(11," - "),t.qZA()(),t.TgZ(12,"td",43),t._uU(13),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.price),t.xp6(5),t.Oqu(e.qty),t.xp6(4),t.Oqu(e.subtotal)}}const Ot=function(n,i){return{"col-md-7 mt-2":n,"col-md-12 mt-2":i}},Tt=function(n){return{"col-md-5":!0,"d-none":n}};function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"h6",15),t._uU(3,"Pick up item"),t.qZA()(),t.TgZ(4,"div",16)(5,"div",17)(6,"div",18),t.YNc(7,xt,4,2,"div",19),t.qZA()()(),t.TgZ(8,"div",16)(9,"div",20)(10,"div",21)(11,"table",22)(12,"thead")(13,"tr")(14,"th",23),t._uU(15,"Name"),t.qZA(),t.TgZ(16,"th",23),t._uU(17,"Price"),t.qZA(),t.TgZ(18,"th",23),t._uU(19,"QTY"),t.qZA(),t.TgZ(20,"th",23),t._uU(21,"Sub Total"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,Zt,14,4,"tr",24),t._UZ(24,"div",25),t.TgZ(25,"tr",26)(26,"td",27),t._uU(27,"Grand Total "),t.qZA(),t._UZ(28,"td",27)(29,"td",27),t.TgZ(30,"td",28),t._uU(31),t.qZA()()()()(),t.TgZ(32,"div",29)(33,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearItem())}),t._uU(34,"Clear"),t.qZA(),t.TgZ(35,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.nextStep())}),t._UZ(36,"i",32),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.WLB(6,Ot,0!=e.OrderObjet.itemObjs.length,0==e.OrderObjet.itemObjs.length)),t.xp6(3),t.Q6J("ngForOf",e.mergeItems),t.xp6(1),t.Q6J("ngClass",t.VKq(9,Tt,0==e.OrderObjet.itemObjs.length)),t.xp6(15),t.Q6J("ngForOf",e.OrderObjet.itemObjs),t.xp6(8),t.hij(" ",e.calculateTotalAmount()," "),t.xp6(4),t.Q6J("disabled",0==e.OrderObjet.itemObjs.length)}}let Ct=(()=>{class n{constructor(e,r,o,a){this.orderState=e,this.menuItemService=r,this.stockService=o,this.router=a,this.isLoading=!0,this.clickSound=new Audio("assets/sound/livechat.mp3"),this.mergeItems=[],this.OrderObjet={total_amount:0,itemObjs:this.orderState.getItems()},this.addItem=s=>{let c={item_type:s.item_type,id:s.id,item_code:s.item_code,name:s.name,price:s.price,qty:1,subtotal:1*s.price};if(s.item_type==_.STOCK){if(this.getQtyFromIndexFromMergeItemArray(this.findIndexFromMergeItemArray(s))<=0)return void alert("stock out");this.updateMergeItemsQuantity(s,"decrease")}if(this.isAlreadyExistOrderItem(s)){let d=this.findIndexFromOrderItemObj(s);this.OrderObjet.itemObjs[d].qty+=1,this.OrderObjet.itemObjs[d].subtotal=this.OrderObjet.itemObjs[d].price*this.OrderObjet.itemObjs[d].qty}else this.OrderObjet.itemObjs.push(c);this.OrderObjet.total_amount=this.calculateTotalAmount(),this.playClickSound()},this.qty=(s,c)=>{let d=this.findIndexFromOrderItemObj(c);if("decrease"==s)1==this.OrderObjet.itemObjs[d].qty?(this.OrderObjet.itemObjs.splice(d,1),this.OrderObjet.total_amount=0):(this.OrderObjet.itemObjs[d].qty-=1,this.OrderObjet.itemObjs[d].subtotal=this.OrderObjet.itemObjs[d].subtotal-this.OrderObjet.itemObjs[d].price),this.updateMergeItemsQuantity(c,"");else{if(c.item_type==_.STOCK){if(this.getQtyFromIndexFromMergeItemArray(this.findIndexFromMergeItemArray(c))<=0)return void alert("stock out");this.updateMergeItemsQuantity(c,"decrease")}this.OrderObjet.itemObjs[d].qty+=1,this.OrderObjet.itemObjs[d].subtotal=this.OrderObjet.itemObjs[d].price*this.OrderObjet.itemObjs[d].qty}this.OrderObjet.total_amount=this.calculateTotalAmount()},this.updateMergeItemsQuantity=(s,c)=>{let d=this.findIndexFromMergeItemArray(s);this.mergeItems[d].quantity=-1!==d&&"decrease"==c&&this.mergeItems[d].quantity?(this.mergeItems[d]?.quantity||0)-1:(this.mergeItems[d]?.quantity||0)+1},this.calculateTotalAmount=()=>this.OrderObjet.itemObjs.reduce((s,c)=>s+c.qty*c.price,0),this.findIndexFromMergeItemArray=s=>this.mergeItems.findIndex(c=>c.item_code==s.item_code),this.findIndexFromOrderItemObj=s=>this.OrderObjet.itemObjs.findIndex(c=>c.item_code==s.item_code),this.isAlreadyExistOrderItem=s=>this.OrderObjet.itemObjs.some(c=>c.item_code===s.item_code),this.getQtyFromIndexFromMergeItemArray=s=>this.mergeItems[s].quantity,this.clearItem=()=>this.OrderObjet={total_amount:0,itemObjs:new Array},this.nextStep=()=>{0!=this.OrderObjet.itemObjs.length?(this.orderState.setTotalAmount(this.OrderObjet.total_amount),this.orderState.setItems(this.OrderObjet.itemObjs),this.router.navigate(["/order/chose-necessary-data"])):alert("Please Select Item")},(0,Z.D)([this.menuItemService.get(),this.stockService.get()]).subscribe(([s,c])=>{const d=s.data.map(b=>new T({item_type:_.MENUITEM,...b})),y=c.data.map(b=>new T({item_type:_.STOCK,...b}));this.mergeItems.push(...d,...y),this.isLoading=!1},s=>{console.log(s),this.isLoading=!1}),console.log(this.mergeItems)}playClickSound(){this.clickSound.play()}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(g),t.Y36(_t.p),t.Y36(gt.q),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-order"]],decls:21,vars:2,consts:[[1,"px-md-4","px-3",2,"padding","relative"],[1,"mt-2"],[1,"card","px-3","pb-5","mt-2","shadow-sm","border"],[1,"d-flex","justify-content-around","align-items-center","bg-light","p-1","rounded","mt-3"],[1,"d-flex"],[1,"step","active","animate__bounceIn"],[1,"ml-2"],[1,"bi","bi-arrow-right-circle-fill","text-success"],[1,"step"],[1,"bi","bi-arrow-right-circle-fill"],["class","d-flex justify-content-around align-items-center p-1 rounded mt-5",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"d-flex","justify-content-around","align-items-center","p-1","rounded","mt-5"],[1,"row","mt-3"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"ngClass"],[1,"border","p-md-3","rounded"],[1,"mt-0","pt-0","pb-2",2,"display","flex","flex-wrap","wrap","gap","5px"],[4,"ngFor","ngForOf"],[1,"border","p-2","rounded"],[1,"table-responsive","mt-2","mb-0"],[1,"table","table-stripped","mb-0"],[1,"p-1"],["class","border-bottom ",4,"ngFor","ngForOf"],[1,"pt-1"],[1,""],[1,"p-1","border-0"],[1,"p-1","border-0",2,"text-align","right"],[1,"pt-3","border-top","mt-1"],[1,"btn","btn-sm","btn-outline-secondary","px-3","ml-1",3,"click"],[1,"btn","btn-sm","btn-secondary","px-3","float-right",3,"disabled","click"],[1,"bi","bi-arrow-right-circle-fill","ml-1"],["class","btn btn-sm border px-3 mr-2","style","background-color: #E6E6EA;",3,"click",4,"ngIf","ngIfElse"],["stockButton",""],[1,"btn","btn-sm","border","px-3","mr-2",2,"background-color","#E6E6EA",3,"click"],[1,"badge","border","ml-2"],[1,"btn","btn-sm","px-3","mr-2",2,"background-color","#E6E6EA",3,"disabled","click"],[1,"badge","border","bg-light","ml-2"],[1,"border-bottom"],[1,"btn","btn-sm","bg-info","py-0",3,"click"],[1,"px-2"],[1,"btn","btn-sm","bg-secondary","py-0",3,"click"],[1,"p-1",2,"text-align","right"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Order / New"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),t._uU(7,"1"),t.qZA(),t.TgZ(8,"span",6),t._uU(9,"Pick up item"),t.qZA()(),t._UZ(10,"i",7),t.TgZ(11,"div",4)(12,"span",8),t._uU(13," 2 "),t.qZA(),t.TgZ(14,"span",6),t._uU(15,"Table & Payment"),t.qZA()(),t._UZ(16,"i",9),t.TgZ(17,"div",8),t._uU(18,"3"),t.qZA()(),t.YNc(19,ht,2,0,"div",10),t.YNc(20,yt,37,11,"div",11),t.qZA()()),2&r&&(t.xp6(19),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading))},dependencies:[m.mk,m.sg,m.O5,O],encapsulation:2})}return n})();var vt=l(6208);function At(n,i){if(1&n&&(t.TgZ(0,"div",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}function qt(n,i){1&n&&(t.TgZ(0,"div",33),t._uU(1," Alread CheckOut "),t.TgZ(2,"button",34),t._uU(3,"See CheckOut"),t.qZA()())}function Ut(n,i){if(1&n&&(t.TgZ(0,"span",42),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.status)}}function It(n,i){if(1&n&&(t.TgZ(0,"span",43),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.status)}}function kt(n,i){if(1&n&&(t.TgZ(0,"span",44),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.status)}}function jt(n,i){if(1&n&&(t.TgZ(0,"span",11),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.menu_item.name)}}function wt(n,i){if(1&n&&(t.TgZ(0,"span",11),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.stock.name)}}function Mt(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",35),t.YNc(2,Ut,2,1,"span",36),t.YNc(3,It,2,1,"span",37),t.YNc(4,kt,2,1,"span",38),t.qZA(),t.TgZ(5,"td",35),t.YNc(6,jt,2,1,"span",39),t.YNc(7,wt,2,1,"span",39),t.qZA(),t.TgZ(8,"td",40),t._uU(9),t.qZA(),t.TgZ(10,"td",41),t._uU(11),t.qZA(),t.TgZ(12,"td",41),t._uU(13),t.qZA()()),2&n){const e=i.$implicit;t.Udp("text-decoration","Cancel"==e.status?"line-through":"none"),t.xp6(2),t.Q6J("ngIf","Completed"==e.status),t.xp6(1),t.Q6J("ngIf","Cancel"==e.status),t.xp6(1),t.Q6J("ngIf","Preparing"==e.status),t.xp6(2),t.Q6J("ngIf","Menu-Item"==e.item_type),t.xp6(1),t.Q6J("ngIf","Stock"==e.item_type),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.hij("",e.price*e.quantity," MMK")}}function Pt(n,i){if(1&n&&(t.TgZ(0,"span",11),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" - ",e.offerPrice," ( ",e.calculateDiscountPercentage()," ) % Dis ")}}function St(n,i){if(1&n&&(t.TgZ(0,"span",11),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.offerType," ")}}function Nt(n,i){if(1&n&&(t.TgZ(0,"tr",19)(1,"td",45),t._uU(2,"Offer"),t.qZA(),t.TgZ(3,"td",46),t.YNc(4,Pt,2,2,"span",39),t.YNc(5,St,2,1,"span",39),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf","Discount"==e.offerType),t.xp6(1),t.Q6J("ngIf","FOC"==e.offerType)}}function Jt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",47)(1,"button",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.checkOut())}),t._uU(2,"CheckOut"),t.qZA(),t.TgZ(3,"button",49),t._uU(4,"Cancel"),t.qZA()()}}function Ft(n,i){1&n&&(t.TgZ(0,"span",50),t._uU(1," Already Checkout "),t.qZA())}function Yt(n,i){if(1&n&&(t.TgZ(0,"span",51),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.order?null:e.order.order_status)}}function Qt(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.order?null:e.order.employee.name," ")}}function Et(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.order?null:e.order.employee.name," ")}}const Dt=function(n){return{"btn btn-sm mr-1 border":!0,"bg-secondary animate__animated animate__bounceIn ":n}};function Lt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selectPayment(a))}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("disabled",0==e.status)("ngClass",t.VKq(3,Dt,e.id==r.selectePaymentObj.id)),t.xp6(1),t.hij(" ",e.title," ")}}function Kt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",63)(1,"span",26),t._uU(2,"Discount Price"),t.qZA(),t.TgZ(3,"div",26)(4,"input",64),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.offerPrice=o)})("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.calculateTotalAmount())}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.offerPrice)}}function Ht(n,i){if(1&n&&(t.TgZ(0,"div",65),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("Transfer to number : ",e.selectePaymentObj.account_number," (",e.selectePaymentObj.account_name,")")}}function Gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",52)(1,"h6",1),t._uU(2," Chose Payment "),t._UZ(3,"i",53),t.qZA(),t.TgZ(4,"div",54),t.YNc(5,Lt,2,5,"button",55),t.TgZ(6,"button",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showOfferView())}),t._uU(7,"Offer "),t._UZ(8,"i",57),t.qZA()(),t.TgZ(9,"div",58)(10,"div",3)(11,"span",26),t._uU(12,"Type"),t.qZA(),t.TgZ(13,"div",26)(14,"select",59),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectOfferType(o))}),t._UZ(15,"option"),t.TgZ(16,"option"),t._uU(17,"FOC"),t.qZA(),t.TgZ(18,"option"),t._uU(19,"Discount"),t.qZA()()()(),t.YNc(20,Kt,5,1,"div",60),t.qZA(),t.YNc(21,Ht,2,2,"div",61),t.qZA()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.paymentMethods.data),t.xp6(15),t.Q6J("ngIf","Discount"==e.offerType),t.xp6(1),t.Q6J("ngIf",null!=e.selectePaymentObj.account_number&&"FOC"!=e.offerType&&0!=e.selectePaymentObj.account_number)}}const Vt=[{path:"order/index",component:pt.l},{path:"order/item-view",component:z},{path:"order/new",component:Ct},{path:"order/chose-necessary-data",component:J},{path:"order/order-summary",component:ut},{path:"order/check-out/:id",component:(()=>{class n{constructor(e,r,o,a,s){this.router=e,this.activatedRoute=r,this.orderService=o,this.paymentMethodServices=a,this.shareMoudle=s,this.fetchLoading=!0,this.paidAmount=0,this.selectePaymentObj={},this.selectPayment=c=>{this.selectePaymentObj=c},this.offerType=null,this.offerPrice=0,this.showOfferView=()=>document.getElementById("offer")?.classList.toggle("d-none"),this.selectOfferType=c=>{this.offerType=c.target.value,"FOC"==this.offerType&&(this.offerPrice=0)},this.getOrder=c=>{this.orderService.getOrderByID(c).subscribe(d=>{this.fetchLoading=!1,this.order=d.data,console.log(this.order)},d=>{this.fetchLoading=!1,console.log(d)})},this.calculateTotalAmount=()=>this.order.items.filter(c=>"Cancel"!==c.status).reduce((c,d)=>c+d.subtotal,0),this.checkOut=()=>{"FOC"!=this.offerType?this.validate()&&this.callCheckOutApi():this.callCheckOutApi()},this.calculateDiscountPercentage=()=>{const c=this.calculateTotalAmount();return 0!==this.offerPrice?this.shareMoudle.calculateDiscountPercentage(c,this.offerPrice):0},this.changeToUndefineerrorMessage=()=>setTimeout(()=>this.errorMessage=void 0,2e3)}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.orderId=e.id,this.getOrder(e.id)}),this.paymentMethodServices.getAll().subscribe(e=>{console.log(e),this.paymentMethods=e,this.fetchLoading=!1},e=>{console.log(e),this.fetchLoading=!1})}callCheckOutApi(){this.orderService.checkOut(this.orderId,this.prePareDataForCheckOut()).subscribe(e=>{console.log(e),this.router.navigate(["transaction/index"])},e=>{console.log(e)})}prePareDataForCheckOut(){return{total_amount:this.calculateTotalAmount(),customer_id:this.order.customer_id,payment_method_id:this.getPaymentID(),paid_amount:this.paidAmount,offer_type:this.offerType,offer_price:this.offerPrice,note:this.note}}getPaymentID(){return this.selectePaymentObj.id?this.selectePaymentObj.id:this.order.payment_method_id}validate(){return 0===Object.keys(this.selectePaymentObj).length?(this.errorMessage="Select Payment",this.changeToUndefineerrorMessage(),!1):0==this.paidAmount?(this.errorMessage="Fill Paid Amount",this.changeToUndefineerrorMessage(),!1):"Discount"!=this.offerType||null!=this.offerPrice||(this.errorMessage="Enter Offer Price",!1)}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(f.p),t.Y36(h.Y),t.Y36(vt.m))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-check-out"]],decls:87,vars:16,consts:[[1,"px-md-4"],[1,"mt-3"],["class","alert alert-warning alert-dismissible fade show mt-3 p-1 border-0","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-7","p-2"],[1,"border","px-1"],[1,"table","table-striped","table-hover","rounded","mt-2","border-0"],[1,"text-white","rounded","p-2","bg-info"],[1,"p-1"],[1,"float-right"],[3,"textDecoration",4,"ngFor","ngForOf"],[1,"font-14"],["colspan","4",1,"px-2","py-1","pt-1","font-14"],[1,"px-2","py-1","text-right","font-14"],["class","bg-white font-14",4,"ngIf"],[1,"bg-white","border-0","bg-white","font-14"],[1,"px-2","py-1","border-0"],[1,"px-2","py-1","border-0","text-right"],["placeholder","Enter Paid Amount",1,"form-control","form-control-sm","border-top-0","border-left-0","border-right-0","border-bottom","pr-1",2,"text-align","right",3,"ngModel","ngModelChange"],[1,"bg-white","font-14"],[1,"border-bottom","pb-0","m-0","mx-2"],["class","text-right",4,"ngIf"],[1,"col-md-5","mt-2","p-2"],[1,"border","rounded","pb-3"],[1,"list-group","list-group-flush","mt-2","mx-2"],[1,"list-group-item","p-1"],[1,"col-6"],[1,"col-6",2,"text-align","right"],["class","badge bg-warning",4,"ngIf"],["class","badge bg-info",4,"ngIf"],[4,"ngIf"],["class","rounded border mt-2 px-3 pb-3",4,"ngIf"],["placeholder","Add Note",1,"form-control","form-control-sm","mt-2",3,"ngModel","ngModelChange"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","mt-3","p-1","border-0"],["routerLink","/transaction/index",1,"btn","btn-sm","border","ml-2","p-0","px-2"],[1,"px-1","py-0","font-14"],["class","badge bg-success font-14",4,"ngIf"],["class","badge bg-warning font-14",4,"ngIf"],["class","badge bg-info font-14",4,"ngIf"],["class","font-14",4,"ngIf"],[1,"px-1","py-0","ont-14","font-14"],[1,"px-1","py-0","text-right","font-14"],[1,"badge","bg-success","font-14"],[1,"badge","bg-warning","font-14"],[1,"badge","bg-info","font-14"],["colspan","3",1,"px-2","py-1","border-0","pt-1","font-14"],["colspan","2",1,"px-2","py-1","border-0","text-right","font-14"],[1,"text-right"],[1,"btn","btn-sm","border","m-2",3,"click"],[1,"btn","btn-sm","border","m-2"],[1,"badge","bg-warning"],[1,"badge","bg-info"],[1,"rounded","border","mt-2","px-3","pb-3"],[1,"bi","bi-wallet2","float-right"],[1,"flex","mx-1","g-2"],[3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","border","text-danger",3,"click"],[1,"ml-2","bi","bi-box2-heart-fill"],["id","offer",1,"mt-2","py-3","d-none"],[1,"form-control","form-control-sm",3,"change"],["class","row mt-2",4,"ngIf"],["class","my-2",4,"ngIf"],[3,"disabled","ngClass","click"],[1,"row","mt-2"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[1,"my-2"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Order / Chekc Out"),t.qZA(),t.YNc(3,At,2,1,"div",2),t.YNc(4,qt,4,0,"div",2),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead",7)(10,"tr")(11,"th",8),t._uU(12,"Status"),t.qZA(),t.TgZ(13,"th",8),t._uU(14,"Name"),t.qZA(),t.TgZ(15,"th",8),t._uU(16,"QTY"),t.qZA(),t.TgZ(17,"th",8),t._uU(18,"Price "),t.qZA(),t.TgZ(19,"th",8)(20,"span",9),t._uU(21,"Subtotal"),t.qZA()()()(),t.TgZ(22,"tbody"),t.YNc(23,Mt,14,10,"tr",10),t.TgZ(24,"tr",11)(25,"td",12),t._uU(26,"Grand Total(not include cancel item) "),t.qZA(),t.TgZ(27,"td",13),t._uU(28),t.qZA()(),t.YNc(29,Nt,6,2,"tr",14),t.TgZ(30,"tr",15)(31,"td",16),t._uU(32,"Paid "),t.qZA(),t._UZ(33,"td",16)(34,"td",16)(35,"td",16),t.TgZ(36,"td",17)(37,"input",18),t.NdJ("ngModelChange",function(s){return o.paidAmount=s}),t.qZA()()(),t.TgZ(38,"tr",19)(39,"td",16),t._uU(40,"Outstanding Income "),t.qZA(),t._UZ(41,"td",16)(42,"td",16)(43,"td",16),t.TgZ(44,"td",17),t._uU(45),t.qZA()()()(),t._UZ(46,"p",20),t.YNc(47,Jt,5,0,"div",21),t.qZA()(),t.TgZ(48,"div",22)(49,"div",23)(50,"ul",24)(51,"li",25)(52,"div",3)(53,"span",26),t._uU(54,"Order Status"),t.qZA(),t.TgZ(55,"div",27),t.YNc(56,Ft,2,0,"span",28),t.YNc(57,Yt,2,1,"span",29),t.qZA()()(),t.TgZ(58,"li",25)(59,"div",3)(60,"span",26),t._uU(61,"Slip"),t.qZA(),t.TgZ(62,"div",27)(63,"span"),t._uU(64),t.qZA()()()(),t.TgZ(65,"li",25)(66,"div",3)(67,"span",26),t._uU(68,"Table"),t.qZA(),t.TgZ(69,"div",27)(70,"span"),t._uU(71),t.qZA()()()(),t.TgZ(72,"li",25)(73,"div",3)(74,"span",26),t._uU(75,"Assing to"),t.qZA(),t.TgZ(76,"div",27),t.YNc(77,Qt,2,1,"span",30),t.qZA()()(),t.TgZ(78,"li",25)(79,"div",3)(80,"span",26),t._uU(81,"Customer"),t.qZA(),t.TgZ(82,"div",27),t.YNc(83,Et,2,1,"span",30),t.qZA()()()()(),t.TgZ(84,"div"),t.YNc(85,Gt,22,3,"div",31),t.TgZ(86,"textarea",32),t.NdJ("ngModelChange",function(s){return o.note=s}),t.qZA()()()()()),2&r&&(t.xp6(3),t.Q6J("ngIf",null!=o.errorMessage),t.xp6(1),t.Q6J("ngIf","checkout"==o.order.order_status),t.xp6(19),t.Q6J("ngForOf",null==o.order?null:o.order.items),t.xp6(5),t.hij("",o.calculateTotalAmount()," MMK"),t.xp6(1),t.Q6J("ngIf",null!=o.offerType),t.xp6(8),t.Q6J("ngModel",o.paidAmount),t.xp6(8),t.hij(" ",o.calculateTotalAmount()-o.paidAmount-o.offerPrice," MMK "),t.xp6(2),t.Q6J("ngIf","checkout"!=o.order.order_status),t.xp6(9),t.Q6J("ngIf","checkout"==o.order.order_status),t.xp6(1),t.Q6J("ngIf","checkout"!=o.order.order_status),t.xp6(7),t.Oqu(null==o.order?null:o.order.slip_numer),t.xp6(7),t.Oqu(null==o.order?null:o.order.table_number),t.xp6(6),t.Q6J("ngIf",null!=(null==o.order?null:o.order.employee_id)),t.xp6(6),t.Q6J("ngIf",null!=(null==o.order?null:o.order.customer_id)),t.xp6(2),t.Q6J("ngIf",null!=o.paymentMethods),t.xp6(1),t.Q6J("ngModel",o.note))},dependencies:[m.mk,m.sg,m.O5,p.rH,u.YN,u.Kr,u.Fj,u.wV,u.JJ,u.On]})}return n})()}];let zt=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(Vt),p.Bz]})}return n})()}}]);